{"version":3,"sources":["webpack:////Users/a123456/Documents/HBuilderProjects/bbcmall/components/upload-pic/upload-pic.vue?b549","webpack:////Users/a123456/Documents/HBuilderProjects/bbcmall/components/upload-pic/upload-pic.vue?7f1e","webpack:////Users/a123456/Documents/HBuilderProjects/bbcmall/components/upload-pic/upload-pic.vue?7678","webpack:////Users/a123456/Documents/HBuilderProjects/bbcmall/components/upload-pic/upload-pic.vue?8e31","webpack:////Users/a123456/Documents/HBuilderProjects/bbcmall/components/upload-pic/upload-pic.vue","webpack:////Users/a123456/Documents/HBuilderProjects/bbcmall/components/upload-pic/upload-pic.vue?7dac","webpack:////Users/a123456/Documents/HBuilderProjects/bbcmall/components/upload-pic/upload-pic.vue?ff10"],"names":["tabHeight","name","data","tabStyleHeight","cvsStyleHeight","styleDisplay","styleTop","prvTop","imgStyle","showOper","props","avatarSrc","avatarStyle","selWidth","selHeight","created","ctxCanvas","uni","createCanvasContext","ctxCanvasOper","ctxCanvasPrv","showTabBar","complete","res","moreHeight","errMsg","onWindowResize","fWindowResize","methods","fGetImgData","Promise","resolve","reject","prvX","prvY","prvWidth","prvHeight","canvasGetImageData","canvasId","x","y","width","height","success","fail","err","fColorChange","e","tm_now","Date","now","prvTm","showLoading","mask","prvImgData","catch","title","duration","target","Uint8ClampedArray","length","i","detail","value","n","r","g","b","max","Math","min","d","h","l","s","a","round","q","p","hK","tR","tG","tB","correctRGB","t","createRGB","setFillStyle","fillRect","draw","canvasPutImageData","hideLoading","sysInfo","getSystemInfoSync","platform","pixelRatio","windowWidth","windowHeight","pxRatio","style","trim","split","obj","v","indexOf","arr","k","parseFloat","join","selStyle","parseInt","top","left","setTimeout","fDrawInit","fHideImg","fUpload","fUploading","canvasToTempFilePath","fileType","quality","tempFilePath","$emit","fPrvUpload","fPrvUploading","destWidth","destHeight","fDrawImage","drawTm","translate","posWidth","useWidth","posHeight","useHeight","scale","scaleSize","rotate","rotateDeg","PI","drawImage","imgPath","prvImg","fPreview","fPreviewing","radio","rHeight","ini","allWidth","allHeight","imgWidth","imgHeight","imgRadio","canvas","canvasOper","setLineWidth","setStrokeStyle","setGlobalAlpha","strokeRect","fSelect","fSelecting","chooseImage","count","sizeType","sourceType","path","tempFilePaths","getImageInfo","src","hideTabBar","fStart","touches","touch0","touch1","fgDistance","sqrt","fMove","atan","abs","fEnd","btop","base64","mime","match","bstr","atob","u8arr","Uint8Array","charCodeAt","window","URL","webkitURL","createObjectURL","Blob","type"],"mappings":"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","file":"components/upload-pic/upload-pic.js","sourcesContent":["import { render, staticRenderFns } from \"./upload-pic.vue?vue&type=template&id=b86cd26e&name=yq-avatar&\"\nimport script from \"./upload-pic.vue?vue&type=script&lang=js&\"\nexport * from \"./upload-pic.vue?vue&type=script&lang=js&\"\nimport style0 from \"./upload-pic.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('b86cd26e', component.options)\n    } else {\n      api.reload('b86cd26e', component.options)\n    }\n    module.hot.accept(\"./upload-pic.vue?vue&type=template&id=b86cd26e&name=yq-avatar&\", function () {\n      api.rerender('b86cd26e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/a123456/Documents/HBuilderProjects/bbcmall/components/upload-pic/upload-pic.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload-pic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload-pic.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload-pic.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload-pic.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX 2.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload-pic.vue?vue&type=template&id=b86cd26e&name=yq-avatar&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nconst tabHeight = 50;\nexport default {\n\tname: \"yq-avatar\",\n\tdata() {\n\t\treturn {\n\t\t\ttabStyleHeight: '0px',\n\t\t\tcvsStyleHeight: '0px',\n\t\t\tstyleDisplay: 'none',\n\t\t\tstyleTop: '-10000px',\n\t\t\tprvTop: '-10000px',\n\t\t\timgStyle: {},\n\t\t\tshowOper: true,\n\t\t};\n\t},\n\tprops:{\n\t\tavatarSrc: '',\n\t\tavatarStyle: '',\n\t\tselWidth: '',\n\t\tselHeight: '',\n\t},\n\tcreated() {\n\t\tthis.ctxCanvas = uni.createCanvasContext('avatar-factory', this);\n\t\tthis.ctxCanvasOper = uni.createCanvasContext('oper-canvas', this);\n\t\tthis.ctxCanvasPrv = uni.createCanvasContext('prv-canvas', this);\n\t\t\n\t\tuni.showTabBar({\n\t\t\tcomplete:(res) => {\n\t\t\t\tthis.moreHeight = (res.errMsg === 'showTabBar:ok') ? 50 : 0;\n\t\t\t\tuni.onWindowResize(()=>{\n\t\t\t\t\tthis.fWindowResize();\n\t\t\t\t})\n\t\t\t\tthis.fWindowResize();\n\t\t\t}\n\t\t});\n\t},\n\tmethods: {\n\t\tfGetImgData() {\n\t\t\treturn new Promise((resolve, reject)=>{\n\t\t\t\tlet prvX = this.prvX,\n\t\t\t\t\tprvY = this.prvY,\n\t\t\t\t\tprvWidth = this.prvWidth,\n\t\t\t\t\tprvHeight = this.prvHeight;\n\n\n\n\n\n\n\t\t\t\tuni.canvasGetImageData({\n\t\t\t\t\tcanvasId: 'prv-canvas',\n\t\t\t\t\tx: prvX,\n\t\t\t\t\ty: prvY,\n\t\t\t\t\twidth: prvWidth,\n\t\t\t\t\theight: prvHeight,\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tresolve(res.data);\n\t\t\t\t\t},\n\t\t\t\t\tfail(err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t});\n\t\t},\n\t\tasync fColorChange(e) {\n\t\t\tlet tm_now = Date.now();\n\t\t\tif(tm_now - this.prvTm < 20) return;\n\t\t\tthis.prvTm = tm_now;\n\t\t\t\n\t\t\tuni.showLoading({ mask: true });\n\t\t\t\n\t\t\tif( !this.prvImgData ) {\n\t\t\t\tif( !(this.prvImgData = await this.fGetImgData().catch((res)=>{\n\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\ttitle: \"error_read\",\n\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t})\n\t\t\t\t}))) return;\n\t\t\t\tthis.target = new Uint8ClampedArray(this.prvImgData.length);\n\t\t\t}\n\t\t\t\n\t\t\tlet data = this.prvImgData,\n\t\t\t\ttarget = this.target,\n\t\t\t\ti = e.detail.value,\n\t\t\t\tr,g,b,a,h,s,l,d,p,q,t,min,max,hK,tR,tG,tB;\n\t\t\t\t\n\t\t\tif( i === 0 ) {\n\t\t\t\ttarget = data;\n\t\t\t} else {\n\t\t\t\ti = (i+100)/200;\n\t\t\t\tif( i < 0.005 ) i = 0;\n\t\t\t\tif( i > 0.995 ) i = 1;\n\t\t\t\tfor( let n = data.length-1; n >= 0; n-=4 ) {\n\t\t\t\t\tr = data[n-3] / 255;\n\t\t\t\t\tg = data[n-2] / 255;\n\t\t\t\t\tb = data[n-1] / 255;\n\t\t\t\t\tmax = Math.max(r,g,b);\n\t\t\t\t\tmin = Math.min(r,g,b);\n\t\t\t\t\td = max-min;\n\t\t\t\t\tif ( max === min ){\n\t\t\t\t\t\th = 0 ;\n\t\t\t\t\t}else if( max === r && g>=b ){\n\t\t\t\t\t\th = 60*( (g-b)/d ) ;\n\t\t\t\t\t}else if( max === r && g<b ){\n\t\t\t\t\t\th = 60*( (g-b)/d ) + 360 ;\n\t\t\t\t\t}else if( max === g ){\n\t\t\t\t\t\th = 60*( (b-r)/d ) + 120 ;\n\t\t\t\t\t}else if( max === b ){\n\t\t\t\t\t\th = 60*( (r-g)/d ) + 240 ;\n\t\t\t\t\t}\n\t\t\t\t\tl = (max+min)/2 ;\n\t\t\t\t\tif ( l===0 || max===min ){\n\t\t\t\t\t\ts = 0 ;\n\t\t\t\t\t}else if( 0<l && l<=0.5 ){\n\t\t\t\t\t\ts = d/(2*l) ;\n\t\t\t\t\t}else if( l>0.5 ){\n\t\t\t\t\t\ts = d/(2-2*l) ;\n\t\t\t\t\t}\n\t\t\t\t\tdata[n] && (a = data[n]);\n\t\t\t\t\t\n\t\t\t\t\tif ( i < 0.5 ){\n\t\t\t\t\t\ts = s*i/0.5 ;\n\t\t\t\t\t}else if ( i > 0.5 ){\n\t\t\t\t\t\ts = 2*s + 2*i - (s*i/0.5) - 1 ;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif ( s === 0 ){\n\t\t\t\t\t\tr = g = b = Math.round( l*255 ) ;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif ( l<0.5 ){\n\t\t\t\t\t\t\tq = l * ( 1 + s ) ;\n\t\t\t\t\t\t}else if( l>=0.5 ){\n\t\t\t\t\t\t\tq = l + s - ( l * s ) ;\n\t\t\t\t\t\t}      \n\t\t\t\t\t\tp = 2*l-q ;\n\t\t\t\t\t\thK = h/360 ;\n\t\t\t\t\t\ttR = hK + 1/3 ;\n\t\t\t\t\t\ttG = hK ;\n\t\t\t\t\t\ttB = hK - 1/3 ;\n\t\t\t\t\t\tlet correctRGB = (t)=>{\n\t\t\t\t\t\t\tif( t<0 ){\n\t\t\t\t\t\t\t\treturn t + 1.0 ;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif( t>1 ){\n\t\t\t\t\t\t\t\treturn t - 1.0 ;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn t ;\n\t\t\t\t\t\t} ;\n\t\t\t\t\t\tlet createRGB = (t)=>{\n\t\t\t\t\t\t\tif ( t<(1/6) ){\n\t\t\t\t\t\t\t\treturn p+((q-p)*6*t) ;\n\t\t\t\t\t\t\t}else if( t>=(1/6) && t<(1/2) ){\n\t\t\t\t\t\t\t\treturn q ;\n\t\t\t\t\t\t\t}else if( t>=(1/2) && t<(2/3) ){\n\t\t\t\t\t\t\t\treturn p+((q-p)*6*((2/3)-t)) ;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn p ;\n\t\t\t\t\t\t} ;\n\t\t\t\t\t\tr = tR = Math.round( createRGB( correctRGB( tR ) )*255 ) ;\n\t\t\t\t\t\tg = tG = Math.round( createRGB( correctRGB( tG ) )*255 ) ;\n\t\t\t\t\t\tb = tB = Math.round( createRGB( correctRGB( tB ) )*255 ) ;\n\t\t\t\t\t}\n\t\t\t\t\ta && ( target[n] = a ) ;  \n\t\t\t\t\ttarget[n-3] = r;\n\t\t\t\t\ttarget[n-2] = g;\n\t\t\t\t\ttarget[n-1] = b;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet prvX = this.prvX,\n\t\t\t\tprvY = this.prvY,\n\t\t\t\tprvWidth = this.prvWidth,\n\t\t\t\tprvHeight = this.prvHeight;\n\t\t\t\t\n\t\t\tthis.ctxCanvasPrv.setFillStyle('black');\n\t\t\tthis.ctxCanvasPrv.fillRect(prvX, prvY, prvWidth, prvHeight);\n\t\t\tthis.ctxCanvasPrv.draw(true);\n\t\t\t\n\n\n\n\n\n\n\t\t\t\n\t\t\t\n\t\t\tuni.canvasPutImageData({\n\t\t\t\tcanvasId: 'prv-canvas',\n\t\t\t\tx: prvX,\n\t\t\t\ty: prvY,\n\t\t\t\twidth: prvWidth,\n\t\t\t\theight: prvHeight,\n\t\t\t\tdata: target,\n\t\t\t\tsuccess(res) {\n\t\t\t\t},\n\t\t\t\tfail() {\n\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\ttitle: 'error_put',\n\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tcomplete(res) {\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t}\n\t\t\t}, this);\n\t\t},\n\t\tfWindowResize() {\n\t\t\tlet sysInfo = uni.getSystemInfoSync();\n\t\t\tthis.platform = sysInfo.platform;\n\t\t\tthis.pixelRatio = sysInfo.pixelRatio;\n\t\t\tthis.windowWidth = sysInfo.windowWidth;\n\t\t\tthis.windowHeight = sysInfo.windowHeight;\n\n\n\n\n\n\n\t\t\tthis.pxRatio = this.windowWidth/750;\n\t\t\tthis.cvsStyleHeight = this.windowHeight - tabHeight + 'px';\n\t\t\tthis.tabStyleHeight = tabHeight + 'px';\n\t\t\t\n\t\t\tlet style = this.avatarStyle;\n\t\t\tif(style && style !== true && (style=style.trim()) ) {\n\t\t\t\tstyle = style.split(';');\n\t\t\t\tlet obj = {};\n\t\t\t\tfor( let v of style ) {\n\t\t\t\t\tif(!v) continue;\n\t\t\t\t\tv = v.trim().split(':');\n\t\t\t\t\tif(v[1].indexOf('upx') >= 0) {\n\t\t\t\t\t\tlet arr = v[1].trim().split(' ');\n\t\t\t\t\t\tfor( let k in arr ) {\n\t\t\t\t\t\t\tif(!arr[k]) continue;\n\t\t\t\t\t\t\tif(arr[k].indexOf('upx') >= 0) {\n\t\t\t\t\t\t\t\tarr[k] = parseFloat(arr[k]) * this.pxRatio + 'px';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tv[1] = arr.join(' ');\n\t\t\t\t\t}\n\t\t\t\t\tobj[v[0].trim()] = v[1].trim();\n\t\t\t\t}\n\t\t\t\tthis.imgStyle = obj;\n\t\t\t}\n\t\t\t\n\t\t\tstyle = this.selStyle || {};\n\t\t\tif( this.selWidth && this.selHeight ) {\n\t\t\t\tstyle.width  = this.selWidth.indexOf('upx')  >= 0 ? parseInt(this.selWidth)  * this.pxRatio + 'px' : this.selWidth;\n\t\t\t\tstyle.height = this.selHeight.indexOf('upx') >= 0 ? parseInt(this.selHeight) * this.pxRatio + 'px' : this.selHeight;\n\t\t\t}\n\t\t\tstyle.top = (this.windowHeight - parseInt(style.height) - tabHeight)/2 + 'px';\n\t\t\tstyle.left = (this.windowWidth - parseInt(style.width))/2 + 'px';\n\t\t\tthis.selStyle = style;\n\t\t\t\n\t\t\tif(this.styleDisplay === 'flex') {\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tthis.fDrawInit(true);\n\t\t\t\t}, 200);\n\t\t\t}\n\t\t\tthis.fHideImg();\n\t\t},\n\t\tfUpload() {\n\t\t\tif(this.fUploading)\treturn;\n\t\t\tthis.fUploading = true;\n\t\t\tsetTimeout(()=>{ this.fUploading = false; }, 1000)\n\t\t\t\n\t\t\tlet style = this.selStyle,\n\t\t\t\tx = parseInt(style.left),\n\t\t\t\ty = parseInt(style.top),\n\t\t\t\twidth = parseInt(style.width),\n\t\t\t\theight = parseInt(style.height);\n\t\t\t\t\n\n\n\n\n\t\t\t\t\n\t\t\tuni.showLoading({\n\t\t\t\tmask: true\n\t\t\t});\n\t\t\t\n\t\t\tthis.styleDisplay = 'none';\n\t\t\tthis.styleTop = '-10000px';\n\t\t\tthis.fHideImg();\n\t\t\tuni.canvasToTempFilePath({\n\t\t\t\tx: x,\n\t\t\t\ty: y,\n\t\t\t\twidth: width,\n\t\t\t\theight: height,\n\t\t\t\tcanvasId: 'avatar-factory',\n\t\t\t\tfileType: 'png',\n\t\t\t\tquality: 0.9,\n\t\t\t\tsuccess: (r)=>{\n\t\t\t\t\t\n\t\t\t\t\tr = r.tempFilePath;\n\n\n\n\n\n\n\t\t\t\t\tthis.$emit(\"upload\", r);\n\n\t\t\t\t},\n\t\t\t\tfail: ()=>{\n\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\ttitle: \"error1\",\n\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\tuni.showTabBar();\n\t\t\t\t}\n\t\t\t}, this);\n\t\t},\n\t\tfPrvUpload() {\n\t\t\tif(this.fPrvUploading)\treturn;\n\t\t\tthis.fPrvUploading = true;\n\t\t\tsetTimeout(()=>{ this.fPrvUploading = false; }, 1000)\n\t\t\t\n\t\t\tlet style = this.selStyle,\n\t\t\t\tdestWidth = parseInt(style.width),\n\t\t\t\tdestHeight = parseInt(style.height),\n\t\t\t\tprvX = this.prvX,\n\t\t\t\tprvY = this.prvY,\n\t\t\t\tprvWidth = this.prvWidth,\n\t\t\t\tprvHeight = this.prvHeight;\n\t\t\t\t\n\n\n\n\n\n\n\n\n\t\t\t\t\n\t\t\tuni.showLoading({\n\t\t\t\tmask: true\n\t\t\t});\n\t\t\tthis.styleDisplay = 'none';\n\t\t\tthis.styleTop = '-10000px';\n\t\t\tthis.fHideImg();\n\t\t\tuni.canvasToTempFilePath({\n\t\t\t\tx: prvX,\n\t\t\t\ty: prvY,\n\t\t\t\twidth: prvWidth,\n\t\t\t\theight: prvHeight,\n\t\t\t\tdestWidth: destWidth,\n\t\t\t\tdestHeight: destHeight,\n\t\t\t\tcanvasId: 'prv-canvas',\n\t\t\t\tfileType: 'png',\n\t\t\t\tquality: 0.9,\n\t\t\t\tsuccess: (r)=>{\n\t\t\t\t\t\n\t\t\t\t\tr = r.tempFilePath;\n\n\n\n\n\n\n\t\t\t\t\tthis.$emit(\"upload\", r);\n\n\t\t\t\t},\n\t\t\t\tfail: ()=>{\n\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\ttitle: \"error_prv\",\n\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\tuni.showTabBar();\n\t\t\t\t}\n\t\t\t}, this);\n\t\t},\n\t\tfDrawImage() {\n\t\t\tlet tm_now = Date.now();\n\t\t\tif(tm_now - this.drawTm < 20) return;\n\t\t\tthis.drawTm = tm_now;\n\t\t\tlet ctxCanvas = this.ctxCanvas;\n\t\t\tctxCanvas.fillRect(0, 0, this.windowWidth, this.windowHeight-tabHeight);\n\t\t\tctxCanvas.translate(this.posWidth+this.useWidth/2, this.posHeight+this.useHeight/2);\n\t\t\tctxCanvas.scale(this.scaleSize, this.scaleSize);\n\t\t\tctxCanvas.rotate(this.rotateDeg * Math.PI/180);\n\t\t\tctxCanvas.drawImage(this.imgPath, -this.useWidth/2, -this.useHeight/2, this.useWidth, this.useHeight);\n\t\t\tctxCanvas.draw(false);\n\t\t},\n\t\tfHideImg() {\n\t\t\tthis.prvImg = '';\n\t\t\tthis.prvTop = '-10000px';\n\t\t\tthis.showOper = true;\n\t\t\tthis.prvImgData = null;\n\t\t\tthis.target = null;\n\t\t},\n\t\tfPreview() {\n\t\t\tif(this.fPreviewing) return;\n\t\t\tthis.fPreviewing = true;\n\t\t\tsetTimeout(()=>{ this.fPreviewing = false; }, 1000);\n\t\t\t\n\t\t\tlet style = this.selStyle,\n\t\t\t\tx = parseInt(style.left),\n\t\t\t\ty = parseInt(style.top),\n\t\t\t\twidth = parseInt(style.width),\n\t\t\t\theight = parseInt(style.height);\n\t\t\t\t\n\n\n\n\n\t\t\t\n\t\t\tuni.showLoading({\n\t\t\t\tmask: true\n\t\t\t});\n\t\t\tuni.canvasToTempFilePath({\n\t\t\t\tx: x,\n\t\t\t\ty: y,\n\t\t\t\twidth: width,\n\t\t\t\theight: height,\n\t\t\t\tcanvasId: 'avatar-factory',\n\t\t\t\tfileType: 'png',\n\t\t\t\tquality: 0.9,\n\t\t\t\tsuccess: (r)=>{\n\t\t\t\t\tr = r.tempFilePath;\n\t\t\t\t\t\n\t\t\t\t\tlet ctxCanvasPrv = this.ctxCanvasPrv,\n\t\t\t\t\t\tprvX = this.windowWidth,\n\t\t\t\t\t\tprvY = parseInt(this.cvsStyleHeight),\n\t\t\t\t\t\tprvWidth = parseInt(this.selStyle.width),\n\t\t\t\t\t\tprvHeight = parseInt(this.selStyle.height),\n\t\t\t\t\t\tuseWidth = prvX - 40,\n\t\t\t\t\t\tuseHeight = prvY - 80,\n\t\t\t\t\t\tradio = useWidth/prvWidth,\n\t\t\t\t\t\trHeight = prvHeight*radio;\n\t\t\t\t\t\tif(rHeight < useHeight) {\n\t\t\t\t\t\t\tprvWidth = useWidth;\n\t\t\t\t\t\t\tprvHeight = rHeight;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tradio = useHeight/prvHeight;\n\t\t\t\t\t\t\tprvWidth *= radio;\n\t\t\t\t\t\t\tprvHeight = useHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\tctxCanvasPrv.setFillStyle('black');\n\t\t\t\t\tctxCanvasPrv.fillRect(0, 0, prvX, prvY);\n\t\t\t\t\tthis.prvX = prvX = (prvX-prvWidth)/2;\n\t\t\t\t\tthis.prvY = prvY = (prvY-prvHeight)/2;\n\t\t\t\t\tthis.prvWidth = prvWidth;\n\t\t\t\t\tthis.prvHeight = prvHeight;\n\t\t\t\t\tctxCanvasPrv.drawImage(r, prvX, prvY, prvWidth, prvHeight);\n\t\t\t\t\tctxCanvasPrv.draw(false);\n\t\t\t\t\t\n\n\n\n\n\n\n\n\t\t\t\t\tif( this.platform != 'android' ) {\n\t\t\t\t\t\tthis.showOper = false;\n\t\t\t\t\t}\n\t\t\t\t\tthis.prvTop = '0';\n\n\t\t\t\t},\n\t\t\t\tfail: ()=>{\n\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\ttitle: \"error2\",\n\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t})\n\t\t\t\t}, \n\t\t\t\tcomplete: () => {\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t}\n\t\t\t}, this);\n\t\t},\n\t\tfDrawInit(ini=false) {\n\t\t\tlet allWidth = this.windowWidth,\n\t\t\t\tallHeight = this.windowHeight,\n\t\t\t\timgWidth = this.imgWidth,\n\t\t\t\timgHeight = this.imgHeight,\n\t\t\t\timgRadio = imgWidth/imgHeight,\n\t\t\t\tuseWidth = allWidth - 40,\n\t\t\t\tuseHeight = allHeight - tabHeight - 80,\n\t\t\t\tpixelRatio = this.pixelRatio;\n\t\t\tif( imgRadio < 1 ) {\n\t\t\t\tif( imgHeight < useHeight ) {\n\t\t\t\t\tuseWidth = imgWidth;\n\t\t\t\t\tuseHeight = imgHeight;\n\t\t\t\t} else {\n\t\t\t\t\tuseHeight = useHeight;\n\t\t\t\t\tuseWidth = useHeight*imgRadio;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif( imgWidth < useWidth ) {\n\t\t\t\t\tuseWidth = imgWidth;\n\t\t\t\t\tuseHeight = imgHeight;\n\t\t\t\t} else {\n\t\t\t\t\tuseWidth = useWidth;\n\t\t\t\t\tuseHeight = useWidth/imgRadio;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.scaleSize = 1;\n\t\t\tthis.rotateDeg = 0;\n\t\t\tthis.posWidth = (allWidth-useWidth)/2;\n\t\t\tthis.posHeight = (allHeight-useHeight-tabHeight)/2;\n\t\t\tthis.useWidth = useWidth;\n\t\t\tthis.useHeight = useHeight;\n\t\t\t\n\t\t\tlet style = this.selStyle,\n\t\t\t\tleft = parseInt(style.left),\n\t\t\t\ttop = parseInt(style.top),\n\t\t\t\twidth = parseInt(style.width),\n\t\t\t\theight = parseInt(style.height),\n\t\t\t\tcanvas = this.canvas,\n\t\t\t\tcanvasOper = this.canvasOper,\n\t\t\t\tctxCanvas = this.ctxCanvas,\n\t\t\t\tctxCanvasOper = this.ctxCanvasOper;\n\t\t\tctxCanvasOper.setLineWidth(3);\n\t\t\tctxCanvasOper.setStrokeStyle('grey');\n\t\t\tctxCanvasOper.setGlobalAlpha(0.3);\n\t\t\tctxCanvasOper.setFillStyle('grey');\n\t\t\tctxCanvasOper.strokeRect( left, top, width, height );\n\t\t\tctxCanvasOper.fillRect(0, 0, this.windowWidth, top);\n\t\t\tctxCanvasOper.fillRect(0, top, left, height);\n\t\t\tctxCanvasOper.fillRect(0, top+height, this.windowWidth, this.windowHeight-height-top-tabHeight);\n\t\t\tctxCanvasOper.fillRect(left+width, top,this.windowWidth-width-left, height);\n\t\t\tctxCanvasOper.draw(false);\n\t\t\t\n\t\t\tif( ini ) {\n\t\t\t\tthis.styleDisplay = 'flex';\n\t\t\t\tthis.styleTop = '0';\n\t\t\t\tctxCanvas.setFillStyle('black');\n\t\t\t\tthis.fDrawImage();\n\t\t\t}\n\t\t},\n\t\tfSelect() {\n\t\t\tif(this.fSelecting) return;\n\t\t\tthis.fSelecting = true;\n\t\t\tsetTimeout(()=>{ this.fSelecting = false; }, 500)\n\t\t\t\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: 1,\n\t\t\t\tsizeType: ['original', 'compressed'],\n\t\t\t\tsourceType: ['album', 'camera'],\n\t\t\t\tsuccess: (r)=>{\n\t\t\t\t\tuni.showLoading({ mask: true });\n\t\t\t\t\tlet path = this.imgPath = r.tempFilePaths[0];\n\t\t\t\t\tuni.getImageInfo({\n\t\t\t\t\t\tsrc: path,\n\t\t\t\t\t\tsuccess: r => {\n\t\t\t\t\t\t\tthis.imgWidth = r.width;\n\t\t\t\t\t\t\tthis.imgHeight = r.height;\n\t\t\t\t\t\t\tthis.path = path;\n\t\t\t\t\t\t\tuni.hideTabBar({\n\t\t\t\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\t\t\t\tthis.fDrawInit(true);\n\t\t\t\t\t\t\t\t\t}, 200);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: ()=>{\n\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\ttitle: \"error3\",\n\t\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcomplete() {\n\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tfStart(e) {\n\t\t\tlet touches = e.touches,\n\t\t\ttouch0 = touches[0],\n\t\t\ttouch1 = touches[1];\n\t\t\t\n\t\t\tthis.touch0 = touch0;\n\t\t\tthis.touch1 = touch1;\n\t\t\t\n\t\t\tif( touch1 ) {\n\t\t\t\tlet x = touch1.x - touch0.x,\n\t\t\t\t\ty = touch1.y - touch0.y;\n\t\t\t\tthis.fgDistance = Math.sqrt(x * x + y * y);\n\t\t\t}\n\t\t},\n\t\tfMove(e) {\n\t\t\tlet touches = e.touches,\n\t\t\t\ttouch0 = touches[0],\n\t\t\t\ttouch1 = touches[1];\n\t\t\t\t\n\t\t\tif( touch1 ) {\n\t\t\t\tlet x = touch1.x - touch0.x,\n\t\t\t\t\ty = touch1.y - touch0.y,\n\t\t\t\t\tfgDistance = Math.sqrt(x * x + y * y),\n\t\t\t\t\tscaleSize = 0.005 * (fgDistance - this.fgDistance);\n\t\t\t\tif( this.scaleSize + scaleSize > 0.3 && this.scaleSize + scaleSize < 4 ) {\n\t\t\t\t\tthis.scaleSize += scaleSize;\n\t\t\t\t} \n\t\t\t\tthis.fgDistance = fgDistance;\n\t\t\n\t\t\t\tif(touch1.x !== touch0.x) {\n\t\t\t\t\tx = (this.touch1.y - this.touch0.y)/(this.touch1.x - this.touch0.x);\n\t\t\t\t\ty = (touch1.y - touch0.y)/(touch1.x - touch0.x);\n\t\t\t\t\tthis.rotateDeg += Math.atan((y-x)/(1+x*y)) * 180/Math.PI;\n\t\t\t\t\tthis.touch0 = touch0;\n\t\t\t\t\tthis.touch1 = touch1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.fDrawImage();\n\t\t\t} else if( this.touch0 ) {\n\t\t\t\tlet x = touch0.x - this.touch0.x,\n\t\t\t\t\ty = touch0.y - this.touch0.y;\n\t\t\t\tif( Math.abs(x) < 100 ) this.posWidth  += x;\n\t\t\t\tif( Math.abs(y) < 100 ) this.posHeight += y;\n\t\t\t\tthis.touch0 = touch0;\n\t\t\t\t\n\t\t\t\tthis.fDrawImage();\n\t\t\t}\n\t\t},\n\t\tfEnd(e) {\n\t\t\tlet touches = e.touches,\n\t\t\t\ttouch0 = touches && touches[0],\n\t\t\t\ttouch1 = touches && touches[1];\n\t\t\tif(touch0) {\n\t\t\t\tthis.touch0 = touch0;\n\t\t\t} else {\n\t\t\t\tthis.touch0 = null;\n\t\t\t\tthis.touch1 = null;\n\t\t\t}\n\t\t},\n\t\tbtop(base64) {\n\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\tvar arr = base64.split(','),\n\t\t\t\t\tmime = arr[0].match(/:(.*?);/)[1],\n\t\t\t\t\tbstr = atob(arr[1]),\n\t\t\t\t\tn = bstr.length,\n\t\t\t\t\tu8arr = new Uint8Array(n);\n\t\t\t\twhile (n--) {\n\t\t\t\t\tu8arr[n] = bstr.charCodeAt(n);\n\t\t\t\t}\n\t\t\t\treturn resolve((window.URL || window.webkitURL).createObjectURL(new Blob([u8arr], { type: mime })));\n\t\t\t});\n\t\t},\n\t}\n}\n","// extracted by mini-css-extract-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var s0 = _vm.__get_style([_vm.imgStyle])\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        s0: s0\n      }\n    }\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }"],"sourceRoot":""}